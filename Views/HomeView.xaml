<Page x:Class="ShifterUser.Views.HomeView"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:conv="clr-namespace:ShifterUser.Converters"
      mc:Ignorable="d"
      Width="400" Height="800"
      Background="White"
      SnapsToDevicePixels="True"
      UseLayoutRounding="True"
      FontFamily="Noto Sans KR"
      TextOptions.TextRenderingMode="ClearType"
      TextOptions.TextFormattingMode="Display"
      Loaded="Page_Loaded">

    <Page.Resources>
        <DropShadowEffect x:Key="ShadowEffect"
                          Color="Black"
                          ShadowDepth="10"
                          BlurRadius="6"
                          Opacity="0.2"/>
        
        

        <!-- === 근무표 색상 팔레트 === -->
        <SolidColorBrush x:Key="ShiftDayBrush"   Color="#FFB300"/>
        <!-- Day: 골드 -->
        <SolidColorBrush x:Key="ShiftEveBrush"   Color="#26A69A"/>
        <!-- Eve: 청록 -->
        <SolidColorBrush x:Key="ShiftNightBrush" Color="#283593"/>
        <!-- Night: 남색 -->
        <SolidColorBrush x:Key="ShiftOffBrush"   Color="#757575"/>
        <!-- Off / '-' : 회색 -->

        <!-- 출퇴근 점 색상 컨버터 -->
        <conv:AttendanceDotToBrushConverter x:Key="DotToBrush"
                                        GrayColor="#BDBDBD"
                                        GreenColor="#00C853"
                                        BlueColor="#2979FF"/>

        <!-- === 근무 코드 → 색상 변환 컨버터 === -->
        <conv:ShiftToBrushConverter x:Key="ShiftToBrushConverter"
                                      DayBrush="{StaticResource ShiftDayBrush}"
                                      EveBrush="{StaticResource ShiftEveBrush}"
                                      NightBrush="{StaticResource ShiftNightBrush}"
                                      OffBrush="{StaticResource ShiftOffBrush}"/>
    </Page.Resources>


    <Grid>
        <!-- 상단 바 -->
        <Border Background="#007AFF" Height="56" VerticalAlignment="Top">
            <Grid>
                <TextBlock Text="하루고리"
                           Foreground="White"
                           FontSize="18"
                           FontWeight="Bold"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center"
                           TextAlignment="Center"/>

                <Grid HorizontalAlignment="Right" VerticalAlignment="Center" Margin="0,0,12,0" Width="24" Height="24">
                    <Button Command="{Binding OpenMyInfoCommand}" Background="Transparent" BorderThickness="0" >
                        <Grid>
                            <Image Source="/Resources/images/setting.png" Width="20" Height="20" />
                        </Grid>
                    </Button>
                </Grid>
            </Grid>
        </Border>

        <StackPanel Margin="16,72,16,16">
            <!-- 출퇴근 카드 -->
            <Grid Margin="0,0,0,15" Visibility="Visible">
                <Border Background="White" CornerRadius="16" Effect="{StaticResource ShadowEffect}" />
                <Border Background="White" CornerRadius="16" Padding="16" BorderBrush="#CCCCCC" BorderThickness="1">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                            <Image Source="/Resources/images/qr_icon.png" Width="45" Height="42" Margin="0,0,12,0"/>
                            <StackPanel>
                                <TextBlock Text="{Binding TodayDate}" FontSize="14" Foreground="Gray"/>
                                <StackPanel Orientation="Horizontal" Margin="0,4,0,0" VerticalAlignment="Center">
                                    <TextBlock Text="{Binding AttendanceText}" 
                                       FontSize="16" 
                                       FontWeight="Bold" 
                                       VerticalAlignment="Center"/>
                                    <Ellipse Width="10" Height="10" Margin="6,3,0,0" VerticalAlignment="Center"
                                         Fill="{Binding AttendanceColor}"/>

                                </StackPanel>

                            </StackPanel>
                        </StackPanel>


                        <Button Content="QR 체크하러 가기"
                                Height="44" Margin="0,8,0,0"
                                Style="{StaticResource RoundedBlueButtonStyle}"
                                Background="#007AFF" Foreground="White" FontWeight="SemiBold"
                                Command="{Binding GoToQrCheckCommand}">
                        </Button>
                    </StackPanel>
                </Border>
            </Grid>
            <!-- 그룹 활동 -->
            <Grid Margin="0,0,0,15">
                <Border Background="White" CornerRadius="16" Effect="{StaticResource ShadowEffect}"/>
                <Border Background="White" CornerRadius="16" Padding="16" BorderBrush="#CCCCCC" BorderThickness="1">
                    <StackPanel>
                        <DockPanel Margin="0,0,0,15">
                            <TextBlock Text="그룹 활동 보기" FontSize="18" FontWeight="Bold" FontFamily="Noto Sans KR"/>
                            <Image Source="/Resources/images/arrow_right.png" Width="15" Height="15" DockPanel.Dock="Right"
                                   Cursor="Hand" HorizontalAlignment="Right">
                                <Image.InputBindings>
                                    <MouseBinding Gesture="LeftClick"  Command="{Binding GoToGroupActivityCommand}" />
                                </Image.InputBindings>
                            </Image>
                        </DockPanel>
                        <Border CornerRadius="12" Background="#F7F7F7" BorderBrush="#CCC" BorderThickness="1" Height="36">
                            <TextBlock Text="{Binding TeamName}" Padding="8,11"  Background="Transparent" Height="44" VerticalAlignment="Center" FontSize="14" HorizontalAlignment="Left"/>
                        </Border>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,12,0,0">
                            <Button Content="공지사항 보기" Width="163" Height="44" Margin="0,0,8,0" FontFamily="Noto Sans KR"
                                    BorderBrush="#007AFF" BorderThickness="1" Background="White" Foreground="#007AFF"
                                    FontWeight="SemiBold" FontSize="16"
                                    Command="{Binding GoToNoticeCommand}">
                                <Button.Resources>
                                    <Style TargetType="Border">
                                        <Setter Property="CornerRadius" Value="22"/>
                                    </Style>
                                </Button.Resources>
                            </Button>
                            <Button Content="인수인계 보기" Width="163" Height="44" Background="#007AFF" Foreground="White" FontFamily="Noto Sans KR"
                                    FontWeight="SemiBold" BorderThickness="0" FontSize="16"
                                    Style="{StaticResource RoundedBlueButtonStyle}"
                                    Command="{Binding GoToHandoverCommand}">
                            </Button>
                        </StackPanel>
                    </StackPanel>
                </Border>
            </Grid>

            <!-- 이번 주 스케줄 -->
            <Grid Margin="0,0,0,15">
                <Border Background="White" CornerRadius="16" Effect="{StaticResource ShadowEffect}"/>
                <Border Background="White" CornerRadius="16" Padding="16" BorderBrush="#CCCCCC" BorderThickness="1" Height="150">
                    <StackPanel>
                        <DockPanel Margin="0,0,0,15">
                            <TextBlock Text="이번 주 스케줄" FontSize="18" FontWeight="Bold" VerticalAlignment="Center" FontFamily="Noto Sans KR"/>
                            <Image Source="/Resources/images/arrow_right.png" Width="15" Height="15" HorizontalAlignment="Right"
                                   Cursor="Hand">
                                <Image.InputBindings>
                                    <MouseBinding Gesture="LeftClick" Command="{Binding GoToScheduleCommand}" />
                                </Image.InputBindings>
                            </Image>
                        </DockPanel>

                        <!-- 색 팔레트 & 컨버터는 이미 등록되어 있다고 가정 -->
                        <UniformGrid Columns="7" HorizontalAlignment="Stretch">
                            <!-- 월 -->
                            <StackPanel HorizontalAlignment="Center" Width="50">
                                <TextBlock Text="월" Background="#EEF6FF" Padding="5,2"
                   Width="50" Height="30" TextAlignment="Center" FontSize="16"/>
                                <TextBlock Text="{Binding WeeklyCodes[0]}" FontWeight="Bold" FontSize="16"
                   TextAlignment="Center" Width="50" Height="30"
                   Foreground="{Binding WeeklyCodes[0], Converter={StaticResource ShiftToBrushConverter}}"/>
                            </StackPanel>

                            <!-- 화 -->
                            <StackPanel HorizontalAlignment="Center" Width="50">
                                <TextBlock Text="화" Background="#EEF6FF" Padding="5,2"
                   Width="50" Height="30" TextAlignment="Center" FontSize="16"/>
                                <TextBlock Text="{Binding WeeklyCodes[1]}" FontWeight="Bold" FontSize="16"
                   TextAlignment="Center" Width="50" Height="30"
                   Foreground="{Binding WeeklyCodes[1], Converter={StaticResource ShiftToBrushConverter}}"/>
                            </StackPanel>

                            <!-- 수 -->
                            <StackPanel HorizontalAlignment="Center" Width="50">
                                <TextBlock Text="수" Background="#EEF6FF" Padding="5,2"
                   Width="50" Height="30" TextAlignment="Center" FontSize="16"/>
                                <TextBlock Text="{Binding WeeklyCodes[2]}" FontWeight="Bold" FontSize="16"
                   TextAlignment="Center" Width="50" Height="30"
                   Foreground="{Binding WeeklyCodes[2], Converter={StaticResource ShiftToBrushConverter}}"/>
                            </StackPanel>

                            <!-- 목 -->
                            <StackPanel HorizontalAlignment="Center" Width="50">
                                <TextBlock Text="목" Background="#EEF6FF" Padding="5,2"
                   Width="50" Height="30" TextAlignment="Center" FontSize="16"/>
                                <TextBlock Text="{Binding WeeklyCodes[3]}" FontWeight="Bold" FontSize="16"
                   TextAlignment="Center" Width="50" Height="30"
                   Foreground="{Binding WeeklyCodes[3], Converter={StaticResource ShiftToBrushConverter}}"/>
                            </StackPanel>

                            <!-- 금 -->
                            <StackPanel HorizontalAlignment="Center" Width="50">
                                <TextBlock Text="금" Background="#EEF6FF" Padding="5,2"
                   Width="50" Height="30" TextAlignment="Center" FontSize="16"/>
                                <TextBlock Text="{Binding WeeklyCodes[4]}" FontWeight="Bold" FontSize="16"
                   TextAlignment="Center" Width="50" Height="30"
                   Foreground="{Binding WeeklyCodes[4], Converter={StaticResource ShiftToBrushConverter}}"/>
                            </StackPanel>

                            <!-- 토 -->
                            <StackPanel HorizontalAlignment="Center" Width="50">
                                <TextBlock Text="토" Background="#EEF6FF" Padding="5,2"
                   Width="50" Height="30" TextAlignment="Center" FontSize="16"/>
                                <TextBlock Text="{Binding WeeklyCodes[5]}" FontWeight="Bold" FontSize="16"
                   TextAlignment="Center" Width="50" Height="30"
                   Foreground="{Binding WeeklyCodes[5], Converter={StaticResource ShiftToBrushConverter}}"/>
                            </StackPanel>

                            <!-- 일 -->
                            <StackPanel HorizontalAlignment="Center" Width="50">
                                <TextBlock Text="일" Background="#EEF6FF" Padding="5,2"
                   Width="50" Height="30" TextAlignment="Center" FontSize="16"/>
                                <TextBlock Text="{Binding WeeklyCodes[6]}" FontWeight="Bold" FontSize="16"
                   TextAlignment="Center" Width="50" Height="30"
                   Foreground="{Binding WeeklyCodes[6], Converter={StaticResource ShiftToBrushConverter}}"/>
                            </StackPanel>
                        </UniformGrid>

                    </StackPanel>
                </Border>
            </Grid>

            <!-- 근무 요청 -->
            <Grid>
                <Border Background="White" CornerRadius="16" Effect="{StaticResource ShadowEffect}"/>
                <Border Background="White" CornerRadius="16" Padding="16" BorderBrush="#CCCCCC" BorderThickness="1" Height="128" VerticalAlignment="Top">
                    <StackPanel>
                        <DockPanel Margin="0,0,0,15">
                            <TextBlock Text="근무 요청 현황" FontSize="18" FontWeight="Bold" FontFamily="Noto Sans KR"/>
                            <Image Source="/Resources/images/arrow_right.png" Width="15" Height="20" DockPanel.Dock="Right" HorizontalAlignment="Right"
                                   Cursor="Hand">
                                <Image.InputBindings>
                                    <MouseBinding Gesture="LeftClick" Command="{Binding GoToRequestStatusCommand}" />
                                </Image.InputBindings>
                            </Image>
                        </DockPanel>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                            <StackPanel Orientation="Horizontal" Margin="0,0,16,0">
                                <Image Source="/Resources/images/check_green.png" Width="28" Height="28"/>
                                <TextBlock Text="{Binding ApprovedText}" Margin="4,0" FontSize="16"/>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal" Margin="0,0,16,0">
                                <Image Source="/Resources/images/pending.png" Width="28" Height="28"/>
                                <TextBlock Text="{Binding PendingText}" Margin="4,0" FontSize="16"/>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal">
                                <Image Source="/Resources/images/cancle_red.png" Width="28" Height="28"/>
                                <TextBlock Text="{Binding RejectedText}" Margin="4,0" FontSize="16"/>
                            </StackPanel>
                        </StackPanel>
                    </StackPanel>
                </Border>
            </Grid>
        </StackPanel>
    </Grid>
</Page>

================================================================================
ì‹œí”„íŠ¸ ìŠ¤ì¼€ì¤„ëŸ¬ v2.0 ë³€ê²½ì  ë° API ë¬¸ì„œ
================================================================================
ì‘ì„±ì¼: 2025-01-06
ë²„ì „: v2.0 (ì™„ì „ ê°œì„ íŒ)
ìƒíƒœ: ì™„ë£Œ âœ… 14/14 í…ŒìŠ¤íŠ¸ 100% í†µê³¼

================================================================================
ğŸ¯ í•µì‹¬ ê°œì„ ì‚¬í•­
================================================================================

1. ëª…ì‹œì  ì‹œí”„íŠ¸ ì§€ì • ì‹œìŠ¤í…œ
   - custom_rulesì—ì„œ night_shifts, off_shifts ì§ì ‘ ì§€ì • ê°€ëŠ¥
   - í‚¤ì›Œë“œ ë§¤ì¹­ ì˜¤ë¥˜ ì™„ì „ í•´ê²° (Morning -> Night ì˜¤ë¥˜ ë“±)

2. ê°œì„ ëœ ì˜¤ë¥˜ ë¶„ì„ ì‹œìŠ¤í…œ
   - INFEASIBLE ì›ì¸ êµ¬ì²´ì  ë¶„ì„ ì œê³µ
   - ìš©ëŸ‰ ë¶€ì¡±, ì œì•½ ì¶©ëŒ ë“± ëª…í™•í•œ ì§„ë‹¨
   - í•´ê²° ë°©ì•ˆ ìë™ ì œì‹œ

3. í”„ë¡œí† ì½œ í˜¸í™˜ì„±
   - í´ë¼ì´ì–¸íŠ¸ í•„ë“œ ìë™ ë³€í™˜ (job_category â†’ position ë“±)
   - ê¸°ì¡´ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œ ìˆ˜ì • ì—†ì´ ì‚¬ìš© ê°€ëŠ¥

4. ì„±ëŠ¥ ìµœì í™”
   - í‰ê·  ì²˜ë¦¬ ì‹œê°„: 0.07ì´ˆ (ì´ì „: 15-20ì´ˆ)
   - ì•ˆì •ì ì¸ OR-Tools ì œì•½ì¡°ê±´ ì‹œìŠ¤í…œ

================================================================================
ğŸ“¡ í´ë¼ì´ì–¸íŠ¸ â†’ ì„œë²„ ìš”ì²­ í”„ë¡œí† ì½œ
================================================================================

### ê¸°ë³¸ ìš”ì²­ í˜•ì‹
```json
{
  "staff_data": {
    "staff": [
      {
        "name": "ê¹€ê°„í˜¸ì‚¬",
        "staff_id": 1001,
        "grade": 3,
        "grade_name": "ì£¼ì„ê°„í˜¸ì‚¬",
        "position": "ê°„í˜¸",
        "total_monthly_work_hours": 195
      },
      {
        "name": "ì´ê°„í˜¸ì‚¬",
        "staff_id": 1002,
        "grade": 4,
        "grade_name": "ê°„í˜¸ì‚¬",
        "position": "ê°„í˜¸",
        "total_monthly_work_hours": 190
      },
      {
        "name": "ë°•ê°„í˜¸ì‚¬",
        "staff_id": 1003,
        "grade": 5,
        "grade_name": "ì‹ ê·œê°„í˜¸ì‚¬",
        "position": "ê°„í˜¸",
        "total_monthly_work_hours": 180
      }
    ]
  },
  "position": "ê°„í˜¸",
  "target_month": "2025-09",
  "custom_rules": {
    "shifts": ["Day", "Evening", "Night", "Off"],
    "shift_hours": {
      "Day": 8,
      "Evening": 8,
      "Night": 8,
      "Off": 0
    },
    "night_shifts": ["Night"],
    "off_shifts": ["Off"]
  }
}
```

### í´ë¼ì´ì–¸íŠ¸ í˜¸í™˜ í˜•ì‹ (ìë™ ë³€í™˜ë¨)
```json
{
  "staff_data": {
    "staff": [
      {
        "name": "ê¹€ê°„í˜¸ì‚¬",
        "staff_uid": 101,
        "grade": 3,
        "job_category": "ê°„í˜¸",
        "monthly_workhour": 195
      }
    ]
  },
  "position": "ê°„í˜¸",
  "target_month": "2025-09",
  "custom_rules": {
    "shifts": ["D", "E", "N", "O"],
    "shift_hours": {"D": 8, "E": 8, "N": 8, "O": 0}
  }
}
```

================================================================================
ğŸ“¤ ì„œë²„ â†’ í´ë¼ì´ì–¸íŠ¸ ì‘ë‹µ í”„ë¡œí† ì½œ
================================================================================

### ì„±ê³µ ì‘ë‹µ
```json
{
  "status": "ok",
  "schedule": {
    "2025-09-01": [
      {
        "shift": "Day",
        "hours": 8,
        "people": [
          {
            "ì´ë¦„": "ê¹€ê°„í˜¸ì‚¬",
            "ì§ì›ë²ˆí˜¸": 1001,
            "ë“±ê¸‰": 3,
            "grade": 3
          }
        ]
      }
    ]
  },
  "details": {
    "solver_status": "OPTIMAL",
    "solve_time": "0.04ì´ˆ",
    "staff_count": 25,
    "shifts_identified": {
      "night_shifts": ["Night"],
      "off_shifts": ["Off"]
    }
  }
}
```

### ì‹¤íŒ¨ ì‘ë‹µ (ìˆ˜í•™ì  ë¶ˆê°€ëŠ¥)
```json
{
  "result": "ìƒì„±ì‹¤íŒ¨",
  "reason": "ìˆ˜í•™ì  ëª¨ë¸ í•´ê²° ë¶ˆê°€ (INFEASIBLE)",
  "status": "error",
  "details": {
    "solver_status": "INFEASIBLE",
    "solve_time": "0.05ì´ˆ",
    "staff_count": 5,
    "analysis": {
      "capacity_analysis": {
        "daily_slots_needed": 4,
        "total_slots_needed": 120,
        "total_staff_capacity": 116,
        "capacity_ratio": 0.967
      }
    },
    "identified_issues": [
      "ìš©ëŸ‰ ë¶€ì¡±: í•„ìš” 120ì¼ vs ê°€ëŠ¥ 116ì¼"
    ],
    "suggestions": [
      "ì§ì› ìˆ˜ ì¦ê°€ ë˜ëŠ” ê·¼ë¬´ì‹œê°„ í•œë„ ìƒí–¥ ì¡°ì •",
      "ì‹œí”„íŠ¸ êµ¬ì¡° ë‹¨ìˆœí™” (ì‹œí”„íŠ¸ ìˆ˜ ì¤„ì´ê¸°)",
      "ì œì•½ì¡°ê±´ ì™„í™” (ì‹ ê·œê°„í˜¸ì‚¬ ì•¼ê°„ê·¼ë¬´ í—ˆìš© ë“±)"
    ]
  }
}
```

================================================================================
ğŸ”§ ì‹œí”„íŠ¸ ì‹ë³„ ì‹œìŠ¤í…œ
================================================================================

### 3ë‹¨ê³„ ì‹œí”„íŠ¸ ì‹ë³„ ë¡œì§

1. **ëª…ì‹œì  ì§€ì • (ìµœìš°ì„ )**
   ```json
   "custom_rules": {
     "night_shifts": ["Night", "ì•¼ê°„", "N1", "N2"],
     "off_shifts": ["Off", "íœ´ë¬´", "R", "Free"]
   }
   ```

2. **ê°œì„ ëœ ìë™ ê°ì§€ (í´ë°±)**
   - ì•¼ê°„ í‚¤ì›Œë“œ: ['night', 'nocturnal', 'ì•¼ê°„', 'ë°¤', 'ì‹¬ì•¼'] (3ê¸€ì ì´ìƒ)
   - íœ´ë¬´ í‚¤ì›Œë“œ: ['off', 'rest', 'free', 'íœ´ë¬´', 'ì‰¼', 'ì˜¤í”„'] (3ê¸€ì ì´ìƒ)
   - ì¶•ì•½í˜• ë§¤í•‘: {'n': 'night', 'o': 'off', 'r': 'rest'}

3. **ì§êµ°ë³„ ê¸°ë³¸ê°’**
   - ê°„í˜¸: night_shifts=['N'], off_shifts=['O']
   - ì†Œë°©: night_shifts=['D24'], off_shifts=['O']

================================================================================
ğŸš€ ì„±ëŠ¥ ì§€í‘œ
================================================================================

### ì²˜ë¦¬ ì„±ëŠ¥
- í‰ê·  ì²˜ë¦¬ ì‹œê°„: 0.07ì´ˆ
- ìµœê³  ì„±ëŠ¥: 0.04ì´ˆ
- ìµœì € ì„±ëŠ¥: 0.11ì´ˆ

### í…ŒìŠ¤íŠ¸ ê²°ê³¼ (test_recommended.py)
- ì´ í…ŒìŠ¤íŠ¸: 14ê°œ
- ì„±ê³µë¥ : 100% (14/14)
- ì´ ì†Œìš” ì‹œê°„: 1.0ì´ˆ
- ì‹ ê·œê°„í˜¸ì‚¬ ì•¼ê°„ ê·¼ë¬´ ê¸ˆì§€: ì •ìƒ ì‘ë™

================================================================================
ğŸ”Œ ì„œë²„ ì„¤ì •
================================================================================

### ë„¤íŠ¸ì›Œí¬
- HOST: 127.0.0.1
- PORT: 6004
- í”„ë¡œí† ì½œ: TCP Socket
- ì¸ì½”ë”©: UTF-8

### ì‹¤í–‰ ëª…ë ¹
```bash
source shifter_env/bin/activate
python3 server_shift_scheduler_v2.py
```

================================================================================
ğŸ“ ë³€ê²½ ì´ë ¥
================================================================================

### v2.0 (2025-01-06) - ì™„ì „ ê°œì„ íŒ
- âœ… ëª…ì‹œì  ì‹œí”„íŠ¸ ì§€ì • ì‹œìŠ¤í…œ êµ¬í˜„
- âœ… í‚¤ì›Œë“œ ë§¤ì¹­ ì˜¤ë¥˜ ì™„ì „ í•´ê²° (Morning ë¬¸ì œ ë“±)
- âœ… í”„ë¡œí† ì½œ í˜¸í™˜ì„± (ìë™ í•„ë“œ ë³€í™˜)
- âœ… ìƒì„¸í•œ ì˜¤ë¥˜ ë¶„ì„ ë° í•´ê²° ë°©ì•ˆ ì œì‹œ
- âœ… OR-Tools ì œì•½ì¡°ê±´ ì•ˆì •í™”
- âœ… 14/14 í…ŒìŠ¤íŠ¸ 100% í†µê³¼
- âœ… ì„±ëŠ¥ ìµœì í™” (0.07ì´ˆ í‰ê· )
- âœ… ë¶ˆí•„ìš”í•œ import/ë³€ìˆ˜ ì œê±°

### v1.x (ì´ì „ ë²„ì „)
- í•˜ë“œì½”ë”©ëœ ì‹œí”„íŠ¸ ê°ì§€
- ì¼ë°˜ì ì¸ ì˜¤ë¥˜ ë©”ì‹œì§€
- í”„ë¡œí† ì½œ ë¶ˆì¼ì¹˜
- ë¶ˆì•ˆì •í•œ ì œì•½ì¡°ê±´
- 0/14 í…ŒìŠ¤íŠ¸ í†µê³¼ ì‹¤íŒ¨

================================================================================